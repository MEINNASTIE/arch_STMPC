import{g as B,a as E,s as F,e as T,_ as b,r as q,u as _,b as M,T as h,j as r,c as L,d as A,P as I,i as G}from"./index-3VRYsP1z.js";import{S as O,c as z,a as P,b as H,d as J,u as V}from"./index.esm-DiHecGd1.js";import{G as l}from"./Grid-BBsbybIg.js";import{T as p,C as K}from"./TextField-CB1S_b7K.js";import{u as Q,f as X}from"./OutlinedInput-B-QBFZg7.js";import"./createSvgIcon-DK3rnIAO.js";function Y(e){return E("MuiFormControlLabel",e)}const c=B("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),Z=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","required","slotProps","value"],ee=e=>{const{classes:a,disabled:o,labelPlacement:n,error:t,required:s}=e,d={root:["root",o&&"disabled",`labelPlacement${T(n)}`,t&&"error",s&&"required"],label:["label",o&&"disabled"],asterisk:["asterisk",t&&"error"]};return A(d,Y,a)},re=F("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(e,a)=>{const{ownerState:o}=e;return[{[`& .${c.label}`]:a.label},a.root,a[`labelPlacement${T(o.labelPlacement)}`]]}})(({theme:e,ownerState:a})=>b({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${c.disabled}`]:{cursor:"default"}},a.labelPlacement==="start"&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},a.labelPlacement==="top"&&{flexDirection:"column-reverse",marginLeft:16},a.labelPlacement==="bottom"&&{flexDirection:"column",marginLeft:16},{[`& .${c.label}`]:{[`&.${c.disabled}`]:{color:(e.vars||e).palette.text.disabled}}})),ae=F("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(e,a)=>a.asterisk})(({theme:e})=>({[`&.${c.error}`]:{color:(e.vars||e).palette.error.main}})),se=q.forwardRef(function(a,o){var n,t;const s=_({props:a,name:"MuiFormControlLabel"}),{className:d,componentsProps:k={},control:u,disabled:j,disableTypography:R,label:S,labelPlacement:$="end",required:v,slotProps:U={}}=s,N=M(s,Z),x=Q(),w=(n=j??u.props.disabled)!=null?n:x==null?void 0:x.disabled,f=v??u.props.required,D={disabled:w,required:f};["checked","name","onChange","value","inputRef"].forEach(m=>{typeof u.props[m]>"u"&&typeof s[m]<"u"&&(D[m]=s[m])});const W=X({props:s,muiFormControl:x,states:["error"]}),g=b({},s,{disabled:w,labelPlacement:$,required:f,error:W.error}),C=ee(g),y=(t=U.typography)!=null?t:k.typography;let i=S;return i!=null&&i.type!==h&&!R&&(i=r.jsx(h,b({component:"span"},y,{className:L(C.label,y==null?void 0:y.className),children:i}))),r.jsxs(re,b({className:L(C.root,d),ownerState:g,ref:o},N,{children:[q.cloneElement(u,D),f?r.jsxs(O,{display:"block",children:[i,r.jsxs(ae,{ownerState:g,"aria-hidden":!0,className:C.asterisk,children:["â€‰","*"]})]}):i]}))}),oe=z({username:P().required("Username is required"),password:P().required("Password is required"),rolename:P().required("Role name is required"),expDate:H().required("Expiration date is required").nullable(),enabled:J()}),ue=()=>{const e=V({initialValues:{username:"",password:"",rolename:"",expDate:null,enabled:!1},validationSchema:oe,onSubmit:async(a,{setErrors:o,setStatus:n})=>{try{const t={username:a.username,password:a.password,rolename:a.rolename,expDate:a.expDate,enabled:a.enabled===!0},s=await fetch("/api/user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(s.status===201){const d=await s.json();n({success:!0}),console.log("User created successfully:",d),e.resetForm()}else o({submit:"Failed to create user"})}catch(t){o({submit:t.message||"An error occurred"})}}});return r.jsxs(I,{elevation:3,style:{padding:20,maxWidth:400,margin:"auto"},children:[r.jsx(h,{variant:"h5",gutterBottom:!0,children:"Create New User"}),r.jsx("form",{onSubmit:e.handleSubmit,children:r.jsxs(l,{container:!0,spacing:2,children:[r.jsx(l,{item:!0,xs:12,children:r.jsx(p,{fullWidth:!0,label:"Username",name:"username",value:e.values.username,onChange:e.handleChange,error:e.touched.username&&!!e.errors.username,helperText:e.touched.username&&e.errors.username})}),r.jsx(l,{item:!0,xs:12,children:r.jsx(p,{fullWidth:!0,label:"Password",name:"password",type:"password",value:e.values.password,onChange:e.handleChange,error:e.touched.password&&!!e.errors.password,helperText:e.touched.password&&e.errors.password})}),r.jsx(l,{item:!0,xs:12,children:r.jsx(p,{fullWidth:!0,label:"Role Name",name:"rolename",value:e.values.rolename,onChange:e.handleChange,error:e.touched.rolename&&!!e.errors.rolename,helperText:e.touched.rolename&&e.errors.rolename})}),r.jsx(l,{item:!0,xs:12,children:r.jsx(p,{fullWidth:!0,label:"Expiration Date",name:"expDate",type:"date",value:e.values.expDate?e.values.expDate.split("T")[0]:"",onChange:e.handleChange,error:e.touched.expDate&&!!e.errors.expDate,helperText:e.touched.expDate&&e.errors.expDate,InputLabelProps:{shrink:!0}})}),r.jsx(l,{item:!0,xs:12,children:r.jsx(se,{control:r.jsx(K,{name:"enabled",color:"primary",checked:e.values.enabled,onChange:e.handleChange}),label:"Enabled"})}),e.errors.submit&&r.jsx(l,{item:!0,xs:12,children:r.jsx(h,{color:"error",children:e.errors.submit})}),r.jsx(l,{item:!0,xs:12,children:r.jsx(G,{color:"primary",variant:"contained",fullWidth:!0,type:"submit",children:"Create User"})})]})})]})};export{ue as default};
