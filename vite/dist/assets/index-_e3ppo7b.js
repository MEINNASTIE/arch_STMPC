import{j as r,P as c,T as u,i as h}from"./index-CRtNENmB.js";import{c as p,a as n,b as x,d as b,u as j}from"./index.esm-D7yrlQs7.js";import{G as a}from"./Grid-DwVTyCgw.js";import{T as t,F as f,C as g}from"./TextField-BqVlrR3s.js";import"./OutlinedInput-BprAPbvk.js";import"./createSvgIcon-3-sENnNJ.js";const w=p({username:n().required("Username is required"),password:n().required("Password is required"),rolename:n().required("Role name is required"),expDate:x().required("Expiration date is required").nullable(),enabled:b()}),S=()=>{const e=j({initialValues:{username:"",password:"",rolename:"",expDate:null,enabled:!1},validationSchema:w,onSubmit:async(s,{setErrors:l,setStatus:d})=>{try{const o={username:s.username,password:s.password,rolename:s.rolename,expDate:s.expDate,enabled:s.enabled===!0},i=await fetch("/api/user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(i.status===201){const m=await i.json();d({success:!0}),console.log("User created successfully:",m),e.resetForm()}else l({submit:"Failed to create user"})}catch(o){l({submit:o.message||"An error occurred"})}}});return r.jsxs(c,{elevation:3,style:{padding:20,maxWidth:400,margin:"auto"},children:[r.jsx(u,{variant:"h5",gutterBottom:!0,children:"Create New User"}),r.jsx("form",{onSubmit:e.handleSubmit,children:r.jsxs(a,{container:!0,spacing:2,children:[r.jsx(a,{item:!0,xs:12,children:r.jsx(t,{fullWidth:!0,label:"Username",name:"username",value:e.values.username,onChange:e.handleChange,error:e.touched.username&&!!e.errors.username,helperText:e.touched.username&&e.errors.username})}),r.jsx(a,{item:!0,xs:12,children:r.jsx(t,{fullWidth:!0,label:"Password",name:"password",type:"password",value:e.values.password,onChange:e.handleChange,error:e.touched.password&&!!e.errors.password,helperText:e.touched.password&&e.errors.password})}),r.jsx(a,{item:!0,xs:12,children:r.jsx(t,{fullWidth:!0,label:"Role Name",name:"rolename",value:e.values.rolename,onChange:e.handleChange,error:e.touched.rolename&&!!e.errors.rolename,helperText:e.touched.rolename&&e.errors.rolename})}),r.jsx(a,{item:!0,xs:12,children:r.jsx(t,{fullWidth:!0,label:"Expiration Date",name:"expDate",type:"date",value:e.values.expDate?e.values.expDate.split("T")[0]:"",onChange:e.handleChange,error:e.touched.expDate&&!!e.errors.expDate,helperText:e.touched.expDate&&e.errors.expDate,InputLabelProps:{shrink:!0}})}),r.jsx(a,{item:!0,xs:12,children:r.jsx(f,{control:r.jsx(g,{name:"enabled",color:"primary",checked:e.values.enabled,onChange:e.handleChange}),label:"Enabled"})}),e.errors.submit&&r.jsx(a,{item:!0,xs:12,children:r.jsx(u,{color:"error",children:e.errors.submit})}),r.jsx(a,{item:!0,xs:12,children:r.jsx(h,{color:"primary",variant:"contained",fullWidth:!0,type:"submit",children:"Create User"})})]})})]})};export{S as default};
