import{g as B,a as E,s as k,e as T,_ as h,r as L,u as _,b as M,T as x,j as r,c as F,d as A,P as I,i as G}from"./index-DzxI2fHZ.js";import{S as z,c as H,a as j,b as V,d as J,u as K,e as O}from"./axios-BvOHPSMS.js";import{G as t}from"./Grid-y-TSbVQX.js";import{T as b,C as Q}from"./TextField-D4D2va0K.js";import{u as X,f as Y}from"./OutlinedInput-DwI-PKZt.js";import"./createSvgIcon-pcM_DUkQ.js";function Z(e){return E("MuiFormControlLabel",e)}const c=B("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),ee=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","required","slotProps","value"],re=e=>{const{classes:a,disabled:o,labelPlacement:i,error:l,required:s}=e,n={root:["root",o&&"disabled",`labelPlacement${T(i)}`,l&&"error",s&&"required"],label:["label",o&&"disabled"],asterisk:["asterisk",l&&"error"]};return A(n,Z,a)},ae=k("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(e,a)=>{const{ownerState:o}=e;return[{[`& .${c.label}`]:a.label},a.root,a[`labelPlacement${T(o.labelPlacement)}`]]}})(({theme:e,ownerState:a})=>h({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${c.disabled}`]:{cursor:"default"}},a.labelPlacement==="start"&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},a.labelPlacement==="top"&&{flexDirection:"column-reverse",marginLeft:16},a.labelPlacement==="bottom"&&{flexDirection:"column",marginLeft:16},{[`& .${c.label}`]:{[`&.${c.disabled}`]:{color:(e.vars||e).palette.text.disabled}}})),se=k("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(e,a)=>a.asterisk})(({theme:e})=>({[`&.${c.error}`]:{color:(e.vars||e).palette.error.main}})),oe=L.forwardRef(function(a,o){var i,l;const s=_({props:a,name:"MuiFormControlLabel"}),{className:n,componentsProps:u={},control:m,disabled:v,disableTypography:R,label:$,labelPlacement:S="end",required:w,slotProps:U={}}=s,N=M(s,ee),f=X(),D=(i=v??m.props.disabled)!=null?i:f==null?void 0:f.disabled,g=w??m.props.required,q={disabled:D,required:g};["checked","name","onChange","value","inputRef"].forEach(p=>{typeof m.props[p]>"u"&&typeof s[p]<"u"&&(q[p]=s[p])});const W=Y({props:s,muiFormControl:f,states:["error"]}),C=h({},s,{disabled:D,labelPlacement:S,required:g,error:W.error}),y=re(C),P=(l=U.typography)!=null?l:u.typography;let d=$;return d!=null&&d.type!==x&&!R&&(d=r.jsx(x,h({component:"span"},P,{className:F(y.label,P==null?void 0:P.className),children:d}))),r.jsxs(ae,h({className:F(y.root,n),ownerState:C,ref:o},N,{children:[L.cloneElement(m,q),g?r.jsxs(z,{display:"block",children:[d,r.jsxs(se,{ownerState:C,"aria-hidden":!0,className:y.asterisk,children:["â€‰","*"]})]}):d]}))}),le=H({username:j().required("Username is required"),password:j().required("Password is required"),rolename:j().required("Role name is required"),expDate:V().required("Expiration date is required").nullable(),enabled:J()}),me=()=>{const e=K({initialValues:{username:"",password:"",rolename:"",expDate:null,enabled:!1},validationSchema:le,onSubmit:async(a,{setErrors:o,setStatus:i})=>{var l,s;try{const n={username:a.username,password:a.password,rolename:a.rolename,expDate:a.expDate,enabled:a.enabled===!0},u=await O.post("https://localhost/api/user",n);u.status===201?(i({success:!0}),console.log("User created successfully:",u.data),e.resetForm()):o({submit:"Failed to create user"})}catch(n){o({submit:((s=(l=n.response)==null?void 0:l.data)==null?void 0:s.message)||"An error occurred"})}}});return r.jsxs(I,{elevation:3,style:{padding:20,maxWidth:400,margin:"auto"},children:[r.jsx(x,{variant:"h5",gutterBottom:!0,children:"Create New User"}),r.jsx("form",{onSubmit:e.handleSubmit,children:r.jsxs(t,{container:!0,spacing:2,children:[r.jsx(t,{item:!0,xs:12,children:r.jsx(b,{fullWidth:!0,label:"Username",name:"username",value:e.values.username,onChange:e.handleChange,error:e.touched.username&&!!e.errors.username,helperText:e.touched.username&&e.errors.username})}),r.jsx(t,{item:!0,xs:12,children:r.jsx(b,{fullWidth:!0,label:"Password",name:"password",type:"password",value:e.values.password,onChange:e.handleChange,error:e.touched.password&&!!e.errors.password,helperText:e.touched.password&&e.errors.password})}),r.jsx(t,{item:!0,xs:12,children:r.jsx(b,{fullWidth:!0,label:"Role Name",name:"rolename",value:e.values.rolename,onChange:e.handleChange,error:e.touched.rolename&&!!e.errors.rolename,helperText:e.touched.rolename&&e.errors.rolename})}),r.jsx(t,{item:!0,xs:12,children:r.jsx(b,{fullWidth:!0,label:"Expiration Date",name:"expDate",type:"date",value:e.values.expDate?e.values.expDate.split("T")[0]:"",onChange:e.handleChange,error:e.touched.expDate&&!!e.errors.expDate,helperText:e.touched.expDate&&e.errors.expDate,InputLabelProps:{shrink:!0}})}),r.jsx(t,{item:!0,xs:12,children:r.jsx(oe,{control:r.jsx(Q,{name:"enabled",color:"primary",checked:e.values.enabled,onChange:e.handleChange}),label:"Enabled"})}),e.errors.submit&&r.jsx(t,{item:!0,xs:12,children:r.jsx(x,{color:"error",children:e.errors.submit})}),r.jsx(t,{item:!0,xs:12,children:r.jsx(G,{color:"primary",variant:"contained",fullWidth:!0,type:"submit",children:"Create User"})})]})})]})};export{me as default};
